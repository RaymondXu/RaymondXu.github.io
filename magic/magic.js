function isAllValid(e,u,t,r,n){return isValid(e)&&isValid(u)&&isValid(t)&&isValid(r)&&isValid(n)}function isValid(e){return null===getStrength(e)?(alert(e+" is not a valid card."),!1):!0}function performMagic(e,u,t,r,n){var i=[e,u,t,r,n],l=[];i.sort(function(e,u){return getStrength(e)-getStrength(u)});for(var d=0;d<i.length-1;d++)if(getSuit(i[d])===getSuit(i[d+1])){l.push(i[d]),l.push(i[d+1]);break}var s=l[0],a=l[1],g=0;VALUES.indexOf(getValue(l[1]))-VALUES.indexOf(getValue(l[0]))>6?(s=l[1],a=l[0],g=13-(VALUES.indexOf(getValue(l[1]))-VALUES.indexOf(getValue(l[0])))):g=VALUES.indexOf(getValue(l[1]))-VALUES.indexOf(getValue(l[0])),alert("Your card is "+a+". After memorizing your card, close this box."),i.splice(i.indexOf(a),1),i.splice(i.indexOf(s),1),i=jumble(i,g),i.splice(getKeyIndex(),0,s),document.getElementById("output").innerHTML=i}function jumble(e,u){return jumbledArr=[],e.sort(function(e,u){return getStrength(e)-getStrength(u)}),1===u?(jumbledArr.push(e[0]),jumbledArr.push(e[1]),jumbledArr.push(e[2])):2===u?(jumbledArr.push(e[0]),jumbledArr.push(e[2]),jumbledArr.push(e[1])):3===u?(jumbledArr.push(e[1]),jumbledArr.push(e[0]),jumbledArr.push(e[2])):4===u?(jumbledArr.push(e[1]),jumbledArr.push(e[2]),jumbledArr.push(e[0])):5===u?(jumbledArr.push(e[2]),jumbledArr.push(e[0]),jumbledArr.push(e[1])):6===u&&(jumbledArr.push(e[2]),jumbledArr.push(e[1]),jumbledArr.push(e[0])),jumbledArr}function getKeyIndex(){var e=PI.substring(i,i+1);return i+=1,parseInt(e)%4}function getValue(e){var u={1:"A",a:"A",11:"J",j:"J",12:"Q",q:"Q",13:"K",k:"K"},t=e.substring(0,e.length-1);return t in u?u[t]:t}function getSuit(e){return e.substring(e.length-1).toUpperCase()}function getStrength(e){return-1===SUITS.indexOf(getSuit(e))||-1===VALUES.indexOf(getValue(e))?null:(SUITS.indexOf(getSuit(e))+1)*(VALUES.length+1)+(VALUES.indexOf(getValue(e))+1)}var VALUES=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],SUITS=["D","C","H","S"],PI="31415926535897932384626433",i=0,submit=!0;$("#input").keyup(function(e){submit&&13===e.keyCode&&$("#go").click()}),$("#go").on("click",function(){submit=!1;var e=$("#one").val(),u=$("#two").val(),t=$("#three").val(),r=$("#four").val(),n=$("#five").val();isAllValid(e,u,t,r,n)&&($("#input").hide(),performMagic(e,u,t,r,n),$("#conclusion").show())}),$("#again").on("click",function(){submit=!0,$("#input").show(),$("#conclusion").hide(),document.getElementById("output").innerHTML="",document.getElementById("addendum").innerHTML=i});